<html xmlns="http://www.w3.org/1999/xhtml">
<head>

<title>jquery定时器使用方法</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<style type="text/css">
#div1{ font-size:36px; color:#f00; font-weight:bold; }
</style>
</head>

<body>
<div id="div1"></div>
<script type="text/javascript" src="http://www.aspbc.com/js/jquery.js"></script>
<input type="button" name="startChat" id="startChat" value="开始">
<input type="button" name="closeChat" id="closeChat" value="停止">
<script type="text/javascript">
$(function(){
	var start = new Date();
	 chat();        
     run();             //加载页面时启动定时器   
     var interval;   	   //定义一个定时器
	 function run() {   
		interval = setInterval(chat, "1000");   //定时的设置
	 }   
	 function chat() {   
		  var d=new Date((new Date()- start)).format('mm:ss');
		  $("#div1").html(d); //jquery修改页面上div中的内容
	 }          
     $("#closeChat").click(function(){          
         clearTimeout(interval);  //关闭定时器          
     })   
	  $("#startChat").click(function(){          
         chat();
		 interval = setInterval(chat, "1000");     //启动定时器          
     })        
}); 

Date.prototype.format = function(format)
{
	var o = {
	"M+" : this.getMonth()+1, //month
	"d+" : this.getDate(),    //day
	"h+" : this.getHours(),   //hour
	"m+" : this.getMinutes(), //minute
	"s+" : this.getSeconds(), //second
	"q+" : Math.floor((this.getMonth()+3)/3),  //quarter
	"S" : this.getMilliseconds() //millisecond
	}
	if(/(y+)/.test(format)) format=format.replace(RegExp.$1,
	(this.getFullYear()+"").substr(4 - RegExp.$1.length));
	for(var k in o)if(new RegExp("("+ k +")").test(format))
	format = format.replace(RegExp.$1,
	RegExp.$1.length==1 ? o[k] :
	("00"+ o[k]).substr((""+ o[k]).length));
	return format;
}
</script>
</body>
</html>